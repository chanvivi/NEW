<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>çµå¸³é é¢ï½œæ‘¯æ„›èŠ±è—</title>
    <link rel="stylesheet" href="css/checkout.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <!-- ç¬¬ä¸€å€‹éƒ¨åˆ† å°è¦½åˆ— -->
    <header class="navbar">
      <div class="navbar__logo">
        <a href="index.html">
          <div class="logo">
            <img src="img/index/logo.png" alt="å›åˆ°é¦–é " />
          </div>
        </a>
      </div>
      <div class="p">
        <div class="navbar-list">
          <nav class="navbar__links">
            <a href="index.html">é¦–é </a>
            <a href="product.html">æ‰€æœ‰å•†å“</a>
            <a href="#" class="unfinished">é—œæ–¼æˆ‘å€‘</a>
            <a href="contact.html">è¯çµ¡æˆ‘å€‘</a>
          </nav>
          <a class="cart-link" id="cartLink">
            <i class="fa fa-shopping-cart"></i>
            <span id="cart-count" class="cart-count"></span>
          </a>
        </div>
        <!-- æ‰‹æ©Ÿæ¼¢å ¡ -->
        <div class="navbar__toggle" id="navbar-toggle">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </header>

    <!-- ç•¶è³¼ç‰©è»Šç‚ºç©º -->
    <section class="empty-cart">
      <img src="img/shopcat.jpg" alt="è²“å¤§äºº" />
      <h2>ä½ çš„è³¼ç‰©è»Šæ˜¯ç©ºçš„ (ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)</h2>
      <p>è¨˜å¾—åŠ å…¥å•†å“åˆ°ä½ çš„è³¼ç‰©è»Šå–”ï¼æˆ‘å€‘ç­‰ä½ å›ä¾†ï½</p>
      <a href="product.html" class="shop-btn">ç¹¼çºŒè³¼ç‰©</a>
    </section>

    <main class="checkout-container">
      <!-- è³¼ç‰©è»Šæ‘˜è¦ -->
      <section class="cart-summary">
        <h2>è³¼ç‰©è»Šå…§å®¹</h2>
        <ul id="checkoutCartList"></ul>
        <p class="checkout-Total">ç¸½é‡‘é¡ï¼š<span id="checkoutTotal">$0</span></p>
      </section>

      <!-- è³¼è²·äººè³‡è¨Š -->
      <section class="buyer-info">
        <h2>æ”¶ä»¶äººè³‡è¨Š</h2>
        <form id="checkoutForm">
          <label>å§“åï¼š<input type="text" name="name" required /></label>
          <label>é›»è©±ï¼š<input type="tel" name="phone" required /></label>
          <label>Emailï¼š<input type="email" name="email" required /></label>
          <label>åœ°å€ï¼š<input type="text" name="address" required /></label>

          <!-- é…é€æ–¹å¼ -->
          <label
            >é…é€æ–¹å¼ï¼š
            <select name="shipping">
              <option value="home">å®…é…</option>
              <option value="store">è¶…å•†å–è²¨</option>
            </select>
          </label>

          <!-- ä»˜æ¬¾æ–¹å¼ -->
          <label
            >ä»˜æ¬¾æ–¹å¼ï¼š
            <select name="payment">
              <option value="credit">ä¿¡ç”¨å¡</option>
              <option value="atm">ATM è½‰å¸³</option>
              <option value="cod">è²¨åˆ°ä»˜æ¬¾</option>
            </select>
          </label>

          <label>
            <input type="checkbox" required /> æˆ‘å·²é–±è®€ä¸¦åŒæ„æœå‹™æ¢æ¬¾
          </label>

          <button type="submit" class="checkout-btn">é€å‡ºè¨‚å–®</button>
        </form>
      </section>
    </main>

    <!-- ç¬¬å››å€‹éƒ¨åˆ† è¯çµ¡æˆ‘å€‘-->
    <footer class="footer">
      <div class="footer__content">
        <div class="footer__brand">
          <h2>æ‘¯æ„›èŠ±è—</h2>
          <p>ç”¨å¿ƒé¸ç‰©ï¼Œå‚³éç”Ÿæ´»çš„æº«åº¦ã€‚</p>
        </div>

        <div class="footer__nav">
          <h3>æ‘¯æ„›é¸è³¼</h3>
          <ul>
            <li class="unfinished"><a href="#">é—œæ–¼æˆ‘å€‘</a></li>
            <li class="unfinished"><a href="#">æ‰€æœ‰å•†å“</a></li>
            <li><a href="contact.html">è¯çµ¡æˆ‘å€‘</a></li>
          </ul>
        </div>
        <div class="footer__txt">
          <h3>æœå‹™æ¢æ¬¾</h3>
          <p>æ¢æ¬¾åŠç´°é …</p>
          <p>é‹é€å’Œäº¤ä»˜</p>
          <p>éš±ç§ç­–ç•¥</p>
          <p>è¨‚è£½ç›¸é—œå•é¡Œ</p>
        </div>
        <div class="footer__contact">
          <h3>è¯çµ¡è³‡è¨Š</h3>
          <p>é›»è©±ï¼š+886-9xx-xxx-xxx</p>
          <p>åœ°å€ï¼š403å°ä¸­å¸‚è¥¿å€æ—æ£®è·¯100å··</p>
          <p>Email: xxxxx@example.com</p>
          <p>Instagram: <a href="*" target="_blank">@xxxxx</a></p>
          <p>Facebookï¼šRose Story èŠ±è—</p>
        </div>
      </div>

      <div class="footer__bottom">
        <p>&copy; 2025 å“ç‰Œåç¨± All Rights Reserved.</p>
        <span>æœ¬ç¶²ç«™ç‚ºå­¸ç¿’ç”¨é€”ä¹‹ä½œå“ï¼Œç„¡ä»»ä½•å•†æ¥­è¡Œç‚ºã€‚</span>
      </div>
    </footer>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const cartList = document.getElementById('checkoutCartList');
        const totalElement = document.getElementById('checkoutTotal');

        // åˆ¤æ–·è³¼ç‰©è»Šæ˜¯å¦ç‚ºç©º
        if (cart.length === 0) {
          document.querySelector('.empty-cart').style.display = 'block';
          document.querySelector('.buyer-info').style.display = 'none';
          document.querySelector('.cart-summary').style.display = 'none';
          return; // ä¸ç¹¼çºŒåŸ·è¡Œ renderCart ç­‰å¾ŒçºŒæµç¨‹
        } else {
          document.querySelector('.empty-cart').style.display = 'none';
          document.querySelector('.buyer-info').style.display = 'block';
          document.querySelector('.cart-summary').style.display = 'block';
        }

        // è¨ˆç®—ç¸½é‡‘é¡
        let total = 0;

        // é¡¯ç¤ºè³¼ç‰©è»Šå…§å®¹
        function renderCart() {
          cartList.innerHTML = '';
          total = 0;

          cart.forEach((item, index) => {
            const li = document.createElement('li');
            li.classList.add('cart-item');
            li.innerHTML = `
              <img src="${item.img}" alt="${item.name}" class="cart-item-image">
              <div class="cart-item-info">
                <div class="cart-item-name">${item.name}</div>
                <div class="cart-item-details">${item.quantity} x ${item.price}</div>
              </div>
              <button class="delete-btn" data-index="${index}">ğŸ—‘</button>
            `;
            cartList.appendChild(li);

            const price = parseFloat(item.price.replace(/[^\d.]/g, '')) || 0;
            total += price * item.quantity;
          });

          totalElement.textContent = `$${total.toFixed(2)}`;

          // ğŸ” åœ¨æ¯æ¬¡ render å®Œå¾Œï¼Œé‡æ–°ç¶å®šåˆªé™¤äº‹ä»¶
          const deleteButtons = document.querySelectorAll('.delete-btn');
          deleteButtons.forEach(btn => {
            btn.addEventListener('click', function () {
              const index = this.getAttribute('data-index');
              cart.splice(index, 1); // åˆªé™¤é‚£ç­†é …ç›®
              localStorage.setItem('cart', JSON.stringify(cart)); // æ›´æ–° localStorage
              renderCart(); // é‡æ–°æ¸²æŸ“

              // é¡¯ç¤ºè³¼ç‰©è»Šç‚ºç©ºçš„æç¤º
              if (cart.length === 0) {
                document.querySelector('.empty-cart').style.display = 'block';
                document.querySelector('.buyer-info').style.display = 'none';
                document.querySelector('.cart-summary').style.display = 'none';
              }
            });
          });
        }

        const checkoutForm = document.getElementById('checkoutForm');
        checkoutForm.addEventListener('submit', function (e) {
          e.preventDefault();
          if (!confirm('ç¢ºèªè¨‚å–®è³‡æ–™ç„¡èª¤ï¼Œæ˜¯å¦é€å‡ºè¨‚å–®ï¼Ÿ')) {
            return;
          }
          localStorage.removeItem('cart');
          alert('è¨‚å–®å·²é€å‡ºï¼');
          location.href = 'thankyou.html';
        });

        renderCart(); // åˆå§‹æ¸²æŸ“è³¼ç‰©è»Š
      });
    </script>

    <!-- å…±ç”¨ æª”æ¡ˆ -->
    <script src="js/common/menu.js"></script>
    <script src="js/common/updateCartCount.js"></script>

  </body>
</html>
